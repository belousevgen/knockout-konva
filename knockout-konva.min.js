(function(){var n={}.hasOwnProperty;(function(n){return typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?n(require("knockout"),exports):typeof define=="function"&&define.amd?define(["knockout","exports"],n):n(ko,ko.konva={})})(function(t,i){var f,e,l,o,s,h,a,v,r,u,c;s=function(n){var i,r,u,e,f;u={};f=t.utils.unwrapObservable(n);for(i in f)e=f[i],r=t.utils.unwrapObservable(e),typeof r!="undefined"&&(u[i]=r);return u};f=function(i,r){var u,f,e=function(n,r){var f,u;if(u=null,typeof i[n]=="function"){if(f=function(t){var r;try{return i[n](t)}catch(u){r=u}},t.isSubscribable(r))return r.subscribe(function(n){return u&&u.stop(),n?u=f(n):void 0});if(r!=null)return f(r)}};for(u in r)n.call(r,u)&&(f=r[u],e(u,f))};e=function(t,i,r){var u,f,l,c,a,e,v,y,o,s,p,w,h;e=[];h=t.eventListeners;for(u in h)if(n.call(h,u))for(c=h[u],o=0,p=c.length;o<p;o++)l=c[o],l.name==="knockout"&&e.push(u);for(s=0,w=e.length;s<w;s++)a=e[s],t.off(""+a+".knockout");y=function(n,r){return t.on(""+n+".knockout",function(n){return r(i,n)})};for(f in r)n.call(r,f)&&(v=r[f],y(f,v))};u=function(n){var t,i;if(n.getStage())return t=function(){var t,u,r;if(n.nodeType==="Stage"){for(r=n.children,t=0,u=r.length;t<u;t++)i=r[t],clearTimeout(i._kktimeout);return n}return n.getLayer()}(),t=typeof n.draw=="function"?n:n.getLayer(),clearTimeout(t._kktimeout),t._kktimeout=setTimeout(function(n){return function(){return n.draw()}}(t),1)};h=function(n,i,r){var u,e,f;for(r==null&&(r={index:0}),e=function(n){return n._kk!=null},u=t.virtualElements.firstChild(n);u!=null;){if(u._kk===i._kk)return r.index;if(e(u))r.index+=1;else if(f=h(u,i,r),f>=0)return f;u=t.virtualElements.nextSibling(u)}return-1};l=function(n,t){return n.on("pointerup mouseup dragend mouseout",function(){var i,r,u;r=n.getAttrs();u=t();for(i in r)r.hasOwnProperty(i)&&u.hasOwnProperty(i)&&u[i](r[i]);return null})};a=function(n){return{init:function(i,r,o,c,a){var k,w,b,p,v,y;if(y=s(r()),k=y.config||y.animate||y.events?y.config:y,v=n(k,i.parentNode),i._kk=v,b=a.createChildContext(c),t.utils.extend(b,{"knockout-konva":{parentElement:i,parentNode:v}}),t.applyBindingsToDescendants(b,i),l(v,r),p=a["knockout-konva"]||{},p.parentNode){if(p.parentNode.add(v),w=h(p.parentElement,i),w<0)throw new Error("element not contained within parent");v.setZIndex(w)}return t.utils.domNodeDisposal.addDisposeCallback(i,function(n){return function(){var f,t,i,e,r,o;if(t=n.getParent(),t){for(r=t.children,o=[],i=0,e=r.length;i<e;i++)if(f=r[i],f===n){n.remove();u(t);break}return o}}}(v)),i.style&&(i.style.display="none"),f(v,y.animate),e(v,i,y.events),{controlsDescendantBindings:!0}},update:function(n,t){var h,r,i,o;return r=n._kk,o=r.getParent()||null,i=s(t()),h=i.config||i.events||i.animate?i.config:i,r.setAttrs(h),f(r,i.animate),e(r,n,i.events),o&&u(o),u(r)}}};c=function(n,i){return t.bindingHandlers[n]=a(i),t.virtualElements.allowedBindings[n]=!0};i.register=c;for(r in Konva)(o=Konva[r],typeof o=="function")&&(v=function(n,t){return n==="Stage"?function(n,i){var r;return r=document.createElement("div"),i.appendChild(r),n.container=r,new t(n)}:function(n){return new t(n)}}(r,o),c("Konva."+r,v))})}).call(this);
//# sourceMappingURL=knockout-konva.min.js.map
